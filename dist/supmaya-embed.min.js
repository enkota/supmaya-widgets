!function(){const e="https://supmaya.com/agents/",n={iframeSrc:`${e}1`,agentBaseUrl:e,agentId:void 0,width:376,height:null,position:"center",overlay:!0,closeOnOverlayClick:!0,triggers:{openOnLoad:!1,delayEnabled:!1,delaySeconds:null,exitIntent:!1,scrollEnabled:!1,scrollPercent:null}},t={baseOptions:{...n},domReady:"loading"!==document.readyState,readyQueue:[],popupEl:null,overlayEl:null,iframeEl:null,isOpen:!1,escapeKeyHandler:null,stylesInjected:!1,clickDelegationBound:!1,autoOpenFired:!1,scrollLockApplied:!1,standardObserver:null},a={delayTimer:null,exitIntentHandler:null,scrollHandler:null},r="iframe[data-supmaya-src], iframe[data-supmaya-id]",i="https://cdn.jsdelivr.net/npm/@open-iframe-resizer/core@v2.1.0/dist/index.min.js",o=new WeakSet,s=new WeakMap;let l=null;function u(e){t.domReady?e():t.readyQueue.push(e)}function c(e,n={}){const t={...e,...n};return t.triggers={...e.triggers||{},...n.triggers||{}},t}function d(){if(t.stylesInjected)return;const e=document.createElement("style");e.id="supmaya-popup-styles",e.textContent="\n      .supmaya-popup-overlay {\n        position: fixed;\n        inset: 0;\n        background: rgb(15 15 15 / 60%);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        padding: 1.5rem;\n        z-index: 2147483000;\n        animation: supmaya-fade-in 180ms ease-out;\n      }\n\n      .supmaya-popup {\n        background: #fff;\n        border-radius: .375rem;\n        box-shadow: #0f0f0f0d 0 0 0 1px,#0f0f0f1a 0 3px 6px,#0f0f0f33 0 9px 24px;\n        overflow: hidden;\n        display: flex;\n        flex-direction: column;\n        position: relative;\n        width: min(100%, 480px);\n      }\n\n      .supmaya-popup.supmaya-center {\n        animation: supmaya-slide-up 200ms ease-out;\n      }\n\n      .supmaya-popup iframe {\n        border: none;\n        width: 100%;\n        height: 100%;\n        flex: 1;\n      }\n\n      .supmaya-popup .supmaya-close {\n        position: absolute;\n        top: .2rem;\n        right: .2rem;\n        background: rgb(192 192 192 / 36%);\n        color: #707070;\n        border: none;\n        border-radius: 999px;\n        cursor: pointer;\n        padding: 2px;\n        height: 15px;\n        width: 15px;\n        cursor: pointer;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n      }\n\n      .supmaya-popup .supmaya-close svg{\n        width:14px;\n        height:14px;\n      }\n\n      .supmaya-popup.supmaya-bottom-right {\n        position: fixed;\n        bottom: 24px;\n        right: 24px;\n        width: auto;\n        max-width: 420px;\n        border-radius: .375rem;\n        animation: supmaya-slide-up 200ms ease-out;\n      }\n\n      body.supmaya-popup-locked {\n        overflow: hidden;\n      }\n\n      @keyframes supmaya-fade-in {\n        from {\n          opacity: 0;\n        }\n        to {\n          opacity: 1;\n        }\n      }\n\n      @keyframes supmaya-slide-up {\n        from {\n          opacity: 0;\n          transform: translateY(12px);\n        }\n        to {\n          opacity: 1;\n          transform: translateY(0);\n        }\n      }\n    ",document.head.appendChild(e),t.stylesInjected=!0}function p(){t.clickDelegationBound||(document.addEventListener("click",e=>{const n=e.target.closest("[data-supmaya-open]");if(!n)return;e.preventDefault();k(function(e){const n={};e.supmayaSrc&&(n.iframeSrc=e.supmayaSrc);if(e.supmayaWidth){const t=Number(e.supmayaWidth);Number.isFinite(t)&&(n.width=t)}if(e.supmayaHeight){const t=Number(e.supmayaHeight);Number.isFinite(t)&&(n.height=t)}e.supmayaPosition&&(n.position=e.supmayaPosition);e.supmayaOverlay&&(n.overlay="false"!==e.supmayaOverlay);if(e.supmayaId){const t=m(e.supmayaId);t&&(n.agentId=t)}if(e.supmayaBaseUrl){const t=y(e.supmayaBaseUrl);t&&(n.agentBaseUrl=t)}return n}(n.dataset))}),t.clickDelegationBound=!0)}function m(e){if(null==e)return;const n=String(e).trim();return n.length>0?n:void 0}function y(e){if(null==e)return;const n=String(e).trim();return n?n.endsWith("/")?n:`${n}/`:void 0}function f(e){if(!e)return"";try{const n=new URL(e,window.location.href),t=n.pathname;if(t.endsWith("/"))n.pathname=t;else{const e=t.lastIndexOf("/");n.pathname=e>=0?t.slice(0,e+1):"/"}return n.toString()}catch(n){const t=e.replace(/\\/g,"/"),a=t.lastIndexOf("/");return a>=0?t.slice(0,a+1):t}}function g(e,n){if(!n)return e;const t=f(e)||e;try{const e=new URL(t,window.location.href),a=e.pathname.endsWith("/")?e.pathname:`${e.pathname}/`;return e.pathname=`${a}${n}`,e.toString()}catch(e){return`${t.endsWith("/")?t.slice(0,-1):t}/${n}`}}function h(e){if(!e.agentId)return e.iframeSrc;return g(e.agentBaseUrl||f(e.iframeSrc)||e.iframeSrc,e.agentId)}function b(e={}){if(!t.domReady)return;document.querySelectorAll(r).forEach(e=>v(e));if(!(!1!==e.observe)||t.standardObserver||!window.MutationObserver)return;const n=document.body;n&&(t.standardObserver=new MutationObserver(e=>{e.forEach(e=>{e.addedNodes.forEach(e=>{e instanceof Element&&(e.matches(r)&&v(e),"function"==typeof e.querySelectorAll&&e.querySelectorAll(r).forEach(e=>v(e)))})})}),t.standardObserver.observe(n,{childList:!0,subtree:!0}))}function v(e){if(!(e instanceof HTMLIFrameElement)||o.has(e))return;const a=function(e){if(!e.hasAttribute("data-supmaya-src")&&!e.hasAttribute("data-supmaya-id"))return null;const a=m(e.dataset?.supmayaId),r=y(e.dataset?.supmayaBaseUrl),i=t.baseOptions?.agentBaseUrl||n.agentBaseUrl,o=e.dataset?.supmayaSrc||e.getAttribute("src"),s=r||o||i,l=a?g(s,a):o||i;let u;try{u=new URL(l,window.location.href)}catch(e){return console.error("SupmayaPopup: invalid iframe src provided",e),null}const c=w(e.dataset.supmayaDynamicHeight),d=w(e.dataset.supmayaTransparentBackground),p="1"===u.searchParams.get("dynamicHeight"),f="1"===u.searchParams.get("transparentBackground"),h=c??p,b=d??f;h&&!p&&u.searchParams.set("dynamicHeight","1");b&&!f&&u.searchParams.set("transparentBackground","1");return{url:u,dynamicHeight:h,transparentBackground:b}}(e);if(!a)return;const{url:r,dynamicHeight:u,transparentBackground:c}=a;e.setAttribute("data-supmaya-embed-ready","true"),e.setAttribute("src",r.toString()),e.getAttribute("title")||e.setAttribute("title","Supmaya agent"),e.getAttribute("loading")||e.setAttribute("loading","lazy"),e.getAttribute("referrerpolicy")||e.setAttribute("referrerpolicy","no-referrer-when-downgrade");const d=function(e,n){if(!e)return n;const t=new Set;return e.split(";").forEach(e=>{const n=e.trim();n&&t.add(n)}),n.split(";").forEach(e=>{const n=e.trim();n&&t.add(n)}),Array.from(t).join("; ")}(e.getAttribute("allow"),"clipboard-write;");e.setAttribute("allow",d),c&&(e.style.backgroundColor="transparent",e.setAttribute("allowtransparency","true")),u&&function(e,n){if(s.has(e))return s.get(e);const t=function(){l||(l=import(i));return l}().then(({initialize:t,updateParentScrollOnResize:a})=>{if("function"!=typeof t)throw new Error("open-iframe-resizer initialize API unavailable");const r=n?.origin;return t({checkOrigin:!r||[r],onIframeResize:"function"==typeof a?a:void 0},e)});return s.set(e,t),t}(e,r).catch(e=>{console.error("SupmayaPopup: failed to enable dynamic height",e)}),o.add(e)}function w(e){if(null==e)return;const n=String(e).trim().toLowerCase();return!n||(!!["true","1","yes","on"].includes(n)||!["false","0","no","off"].includes(n)&&void 0)}function x(){a.delayTimer&&(clearTimeout(a.delayTimer),a.delayTimer=null),a.exitIntentHandler&&(document.removeEventListener("mouseout",a.exitIntentHandler),a.exitIntentHandler=null),a.scrollHandler&&(document.removeEventListener("scroll",a.scrollHandler),a.scrollHandler=null)}function E(){if(!t.domReady)return;x();const e=t.baseOptions.triggers||{};e.openOnLoad&&window.requestAnimationFrame(()=>O("load"));if(e.delayEnabled??null!=e.delaySeconds){const n=Number(e.delaySeconds);Number.isFinite(n)&&n>=0&&(a.delayTimer=window.setTimeout(()=>O("delay"),1e3*n))}e.exitIntent&&(a.exitIntentHandler=e=>{const n=e.target;if(n!==document.documentElement&&n!==document.body)return;if(null!==e.relatedTarget)return;const t=e.clientX<=8,a=e.clientX>=window.innerWidth-8;(e.clientY<=8||t||a)&&O("exit-intent")},document.addEventListener("mouseout",a.exitIntentHandler));if(e.scrollEnabled??null!=e.scrollPercent){const n=Number(e.scrollPercent);if(Number.isFinite(n)&&n>=0){const e=Math.min(100,Math.max(0,n));a.scrollHandler=()=>{const n=document.documentElement.scrollHeight-window.innerHeight;(n<=0?0:window.scrollY/n*100)>=e&&O("scroll")},document.addEventListener("scroll",a.scrollHandler,{passive:!0}),a.scrollHandler()}}}function O(e){t.autoOpenFired||(t.autoOpenFired=!0,x(),k())}function k(e={}){const a=function(e){const t={...e};t.iframeSrc=t.iframeSrc||n.iframeSrc,t.agentId=m(t.agentId),t.agentBaseUrl=y(t.agentBaseUrl??n.agentBaseUrl)||n.agentBaseUrl;const a=Number(t.width);t.width=Number.isFinite(a)&&a>0?a:n.width;const r=Number(t.height);if(t.height=Number.isFinite(r)&&r>0?r:null,t.position=["center","bottom-right"].includes(t.position)?t.position:"center",!t.height)if("bottom-right"===t.position)t.height=520;else{const e=Math.max(360,Math.min(720,window.innerHeight-80));t.height=e}return t.overlay="center"===t.position&&!1!==t.overlay,t.closeOnOverlayClick=!1!==t.closeOnOverlayClick,t.iframeSrc=h(t),t}(c(t.baseOptions,e));u(()=>{d(),function(e){H();let n=document.body;if(e.overlay){const a=document.createElement("div");a.className="supmaya-popup-overlay",e.closeOnOverlayClick&&a.addEventListener("click",e=>{e.target===a&&S()}),document.body.appendChild(a),t.overlayEl=a,n=a,t.scrollLockApplied||(document.body.classList.add("supmaya-popup-locked"),t.scrollLockApplied=!0)}const a=document.createElement("div");a.className=`supmaya-popup supmaya-${e.position}`,a.setAttribute("role","dialog"),a.setAttribute("aria-modal",String(!!e.overlay)),a.setAttribute("aria-label","Supmaya agent popup"),a.tabIndex=-1,a.style.width=`${e.width}px`,a.style.height=`${e.height}px`,a.style.maxWidth="calc(100% - 32px)",a.style.maxHeight="calc(350px - 32px)";const r=document.createElement("div");r.type="div",r.className="supmaya-close",r.setAttribute("aria-label","Close popup"),r.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="size-5"><path d="M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z" /></svg>',r.addEventListener("click",S);const i=document.createElement("iframe");i.src=h(e),i.title="Supmaya agent",i.loading="lazy",i.referrerPolicy="no-referrer-when-downgrade",i.allow="microphone; camera; fullscreen; clipboard-write; autoplay",a.appendChild(r),a.appendChild(i),n.appendChild(a),t.popupEl=a,t.iframeEl=i,t.isOpen=!0,t.escapeKeyHandler||(t.escapeKeyHandler=e=>{const n=e?.key||e&&e.keyIdentifier||null;"Escape"!==n&&"Esc"!==n&&27!==e.keyCode||S()},document.addEventListener("keydown",t.escapeKeyHandler));window.requestAnimationFrame(()=>{a.focus()})}(a)})}function S(){H()}function H(){t.popupEl&&(t.popupEl.remove(),t.popupEl=null),t.overlayEl&&(t.overlayEl.remove(),t.overlayEl=null),t.escapeKeyHandler&&(document.removeEventListener("keydown",t.escapeKeyHandler),t.escapeKeyHandler=null),t.scrollLockApplied&&(document.body.classList.remove("supmaya-popup-locked"),t.scrollLockApplied=!1),t.isOpen=!1,t.iframeEl=null}function L(e={}){return t.baseOptions=c(t.baseOptions,e),t.baseOptions.agentBaseUrl=y(t.baseOptions.agentBaseUrl??n.agentBaseUrl)||n.agentBaseUrl,t.autoOpenFired=!1,u(()=>{d(),p(),E(),b()}),{...t.baseOptions}}t.domReady||document.addEventListener("DOMContentLoaded",()=>{t.domReady=!0;const e=[...t.readyQueue];t.readyQueue.length=0,e.forEach(e=>e())}),u(()=>{b(),p()}),window.SupmayaPopup={init:function(e={}){return t.baseOptions=c(n,e),t.baseOptions.agentBaseUrl=y(t.baseOptions.agentBaseUrl??n.agentBaseUrl)||n.agentBaseUrl,t.autoOpenFired=!1,u(()=>{d(),p(),E(),b()}),{...t.baseOptions}},update:L,configure:L,open:k,close:S,resetTriggers:function(){t.autoOpenFired=!1,u(()=>{E()})},refreshEmbeds:function(){u(()=>{b({observe:!1})})}}}();